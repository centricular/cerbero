# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python
from cerbero.tools.libtool import LibtoolLibrary


class Recipe(recipe.Recipe):
    name = 'harfbuzz'
    version = '1.7.6'
    #stype = SourceType.TARBALL
    #url = 'https://www.freedesktop.org/software/%(name)s/release/%(name)s-%(version)s.tar.bz2'
    #tarball_checksum = '84574e1b1f65ca694cb8fb6905309665c0368af18a312357f8ff886ee2f29563'
    stype = SourceType.GIT
    btype = BuildType.MESON
    remotes = {'origin': 'https://github.com/centricular/%(name)s.git'}
    commit = 'origin/meson'
    licenses = [{License.BSD_like: ['COPYING', 'src/hb-ucdn/COPYING']}]
    deps = ['fontconfig', 'cairo', 'glib']

    files_bins = ['hb-ot-shape-closure', 'hb-view', 'hb-shape']
    files_libs = ['libharfbuzz']
    files_devel = ['include/harfbuzz/*.h', 'lib/pkgconfig/harfbuzz.pc']

    def post_install (self):
        deps = ['glib-2.0', 'intl', 'freetype', 'bz2', 'png16', 'z', 'stdc++']
        lib = LibtoolLibrary('harfbuzz', None, None, None, self.config.libdir,
                self.config.target_platform, deps=deps)
        lib.save()
        super().post_install()
