# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python
from cerbero.tools.libtool import LibtoolLibrary

class Recipe(recipe.Recipe):
    name = 'fontconfig'
    version = '2.13.0'
    #stype = SourceType.TARBALL
    #url = 'https://www.freedesktop.org/software/fontconfig/release/fontconfig-%(version)s.tar.gz'
    #tarball_checksum = '064b9ebf060c9e77011733ac9dc0e2ce92870b574cca2405e11f5353a683c334'
    btype = BuildType.MESON
    remotes = {'origin': 'https://github.com/centricular/%(name)s.git'}
    commit = 'origin/meson'
    licenses = [{License.MIT: ['COPYING']}]
    deps = ['expat', 'freetype', 'zlib', 'bzip2']

    files_libs = ['libfontconfig']
    files_etc = [
        'etc/fonts/conf.d',
        'etc/fonts/fonts.conf',
        'share/fontconfig'
        ]
    files_devel = ['lib/pkgconfig/fontconfig.pc', 'include/fontconfig']

    def post_install (self):
        deps = ['freetype', 'png16', 'expat', 'bz2', 'z']
        lib = LibtoolLibrary('fontconfig', None, None, None, self.config.libdir,
                self.config.target_platform, deps=deps)
        lib.save()
        super().post_install()
